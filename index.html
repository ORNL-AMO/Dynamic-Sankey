<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Dynamic Sankey Diagram</title>
        <meta name="discription" content="A dynamic Sankey diagram">

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

        <link rel="stylesheet" href="ui-style.css">
        <!--<link rel="stylesheet" href="ui-style.css" media="print">-->

        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.js"></script>
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.css">

        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


    </head>
    <body>

        <div class="header-row noPrint" id="header-row" style="z-index: +5;">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-xs-12" id="banner">
                        <h1 id="banner-title" class="pull-left">Dynamic Sankey Diagram Tool</h1>
                        <button type="button" class="btn btn-default btn-circle pull-right btn-lg" title='help' data-toggle="modal" data-target="#helpModal" style="position: relative; top: 25%"><span class="glyphicon glyphicon-question-sign" style="top:-12px; left: -19px; font-size: 55px"></span></button>

                    </div>
                </div>
            </div>
        </div>

        <div id="helpModal" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title text-center">About</h4>
                    </div>
                    <div class="modal-body">
                        <p>A Sankey diagram is a type of flow diagram where the width of the arrows is proportion to the flow quantity. Sankey diagrams are often used to represent primary energy flow in and out of a system, while illustrating losses, recovery streams, the final useful energy.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>

            </div>
        </div>

        <div id="acknowledgmentsModal" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title text-center">Acknowledgments</h4>
                    </div>
                    <div class="modal-body text-center">
                        <strong>Team:</strong><br>
                        Thomas Wenning: Creator & Vision Director<br>
                        Michael Whitmer: Creator & Programmer<br>
                        Gina Accawi: Mentor
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>

            </div>
        </div>

        <div id="title-row">

            <div class="dropdown pull-left noPrint">
                <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" style="width: 40px; height: 40px; background-color: #20181f; border: 0;" title="menu"><i class="material-icons" style="position: relative; left: -5px; color: #ffffff;">menu</i></button>
                <ul class="dropdown-menu">
                    <li><a id="saveSelect" tabindex="-1" onclick='saveSankey("saveSelect")' style="cursor: pointer;">Save</a></li>
                    <li><a id="importBtn" tabindex="-1" style="cursor: pointer;">Open</a></li>
                    <li><a tabindex="-1" onclick='toggleEditingMode()' style="cursor: pointer;">Edit</a></li>
                    <li><a tabindex="-1" onclick='window.print()' style="cursor: pointer;">Print</a></li>
                    <li><a tabindex="-1" data-toggle="modal" data-target="#helpModal" style="cursor: pointer;">Help</a></li>
                    <li><a tabindex="-1" data-toggle="modal" data-target="#acknowledgmentsModal" style="cursor: pointer;">Acknowledgments</a></li>
                </ul>
            </div>
            <input type='file' id='fileSelector' style='visibility: hidden; height: 0px; width: 0px;'>
            <script>
                $("#importBtn").click(function(){
                    $('#fileSelector').click();
                });
            </script>

            <h2 id='sankey-title' class="text-center" contenteditable='true' style='margin: 0px; padding: 0px; color: #ffffff;'>Sankey</h2>
        </div>

        <div id="detailScreen" class="noPrint">
        </div>

        <div class="col-md-12 text-center" id="sandbox" style="padding: 0px;">
            <!--<button id="addSankeyBtn" class='btn btn-secondary pull-left' onclick='makeSankeyForm()' style='display: inline-block; position: relative; z-index: 2; background-color: #7ec783'><span class='glyphicon glyphicon-plus'></span></button>-->

            <button id="createSankeyBtn" class='btn btn-secondary text-center btn-pop noPrint' onclick='makeSankey("#sankey-display", true)' style='background-color: #7ec783; position: relative; z-index: 3;'><strong>Create Sankey</strong></button>

            <div class="pull-right noPrint" style="padding-right: 0px; position: relative; z-index: 3;">
                <button class='btn btn-secondary pull-right btn-pop' title='edit' onclick='' style='background-color: #d4161c;'><i class='glyphicon glyphicon-minus'></i></button>
            </div>
            <div class="pull-right noPrint" style="padding-right: 0px;  position: relative; z-index: 3;">
                <button  class='btn btn-secondary btn-pop' title='canvas settings' type="button" data-toggle="modal" data-target="#canvasSettingsModal" style='display: inline-block; background-color: #d9d9db; width: 40px; height: 34px'><i class="material-icons" style="font-size: 22px; position: relative; left: -3px; top: -2px;">palette</i></button>
            </div>
            <div class="pull-right noPrint" style="padding-right: 0px; position: relative; z-index: 3;">
                <button  class='btn btn-secondary btn-pop' title='import images' type="button" data-toggle="modal" data-target="#importImagesModal" style='display: inline-block; background-color: #d9d9db;'><span class='glyphicon glyphicon-picture'></span></button>
            </div>
            <div class="pull-right noPrint" style="padding-right: 0px; position: relative; z-index: 3;">
                <button class='btn btn-secondary pull-right btn-pop' title='edit' onclick='toggleEditingMode()' style='background-color: #dcdcdc;'><i class='glyphicon glyphicon-edit'></i></button>
            </div>
            <!--
            <div class="pull-left noPrint" style="padding-right: 0px; position: relative; z-index: 4; top: 4px;">
                <button class='btn btn-secondary pull-right' title='edit' onclick='toggleEditingMode()' style='background-color: #f2f2f2;'><i class="material-icons">arrow_drop_down_circle</i></button>
                <button class='btn btn-secondary pull-right' title='edit' onclick='toggleEditingMode()' style='background-color: #f2f2f2;' style="padding-right: 0px; position: relative; z-index: 4; top: 3px; left: -40px;"><i class="material-icons">arrow_drop_down_circle</i></button>
            </div>
            -->

            <div id="canvasSettingsModal" class="modal fade" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Canvas Color</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row" style="padding: 10px;">

                                <input id="canvasColorPalette"  class="pull-right"/>
                                    <script>
                                        $("#canvasColorPalette").spectrum({
                                            color: "#FFFFFF"
                                        });
                                        $("#canvasColorPalette").change( function(){
                                            $("#sankey-display").css("background-color", $("#canvasColorPalette").spectrum("get").toHexString());
                                        });
                                    </script>

                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>

                </div>
            </div>

            <div id="importImagesModal" class="modal fade" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Import Images</h4>
                        </div>
                        <div class="modal-body">
                            <!--
                            <div class="col-md-6" style="">
                                <div class="row" style="padding-left: 15px; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #dcdcdc;" >
                                        <h4 class="pull-left">Load Images</h4>
                                </div>
                                <input type="file" style="padding-top: 10px;" />
                            </div>
                            -->
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>

                </div>
            </div>

            <div id="sankey-display" class="drop_zone" name="files[]" multiple>
            </div>

            <!--<div id="elem" onmousedown='mydragg.startMoving(this,"sankey-display",event);' onmouseup='mydragg.stopMoving("sankey-display");' style="width: 200px;height: 100px;"></div>-->
        </div>

        <script src="node_modules/d3/build/d3.min.js"></script>
        <script src="sankey.js"></script>
        <script>makeSankeyForm();</script>

        </body>
    </html>
